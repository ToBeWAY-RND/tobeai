<!--
chatflowid::
    MANUAL
    SEARCH
    gpt-4o-mini : a1b9a25d-81ee-48cd-822b-09ae2bd89725
    gpt-5-nano  : fc142d8d-be62-4565-bdb4-42b3ee258009
-->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flowise Chatbot Widget</title>
</head>

<body>
<div id="root"></div>
<script type="module">
  import Chatbot from './web.js'
  Chatbot.initFull({
    chatflowid: 'MANUAL',
    apiHost: 'https://aiml.tobeway.com:8443',
    chatflowConfig: {
      vars: {
        mdmModule: 'MDM',
        aimlUrl:"https://aiml.tobeway.com:8443",
        gptModel:"gpt-4o-mini",
        langCode: "KO",
        mdmUrl: "https://rnd.tobeway.com:8000/tbwapi",
        userId: "ksm",
        userToken: "gejDolc+90dtL1t+mszjAPT0bIMdgqHCplmFf66mJ9s="
      }
    },
    theme: {
      button: {
        backgroundColor: "#F8F8F8",
        right: 20,
        bottom: 20,
        size: 48,
        dragAndDrop: true,
        iconColor: "#000000",
        autoWindowOpen: {
          autoOpen: true,
          openDelay: 2,
          autoOpenOnMobile: false
        }
      },
      chatWindow: {
        width: '700',
        showTitle: true,
        showAgentMessages: false,
        title: "토비 AI",
        welcomeMessage: "안녕하세요 김신모님! 필요한 정보나 궁금한 점이 있다면 말씀해주세요. 함께 해결해드리겠습니다.",
        clearChatOnReload: false,
        starterPrompts: ["MDM 업무규칙?"],
        backgroundColor: "#F8F8F8",
        closeButtonColor: "#343A40",
        showCloseButton: true,
        useObserverClose: true,
        botMessage: {
          backgroundColor: "#FFFFFF",
          backgroundColorEmphasize: "#FFFFFF",
          textColor: "#474747",
          showAvatar: true,
          avatarSrc: "https://rnd.tobeway.com:8000/web/tbwcore/images//icon/bot.png",
          avatarLoadingSrc: "https://rnd.tobeway.com:8000/web/tbwcore/images//icon/bot_loading.gif",
          avatarInfoSrc: "https://rnd.tobeway.com:8000/web/tbwcore/images//icon/bot_info.png",
          avatarEmptySrc: "https://rnd.tobeway.com:8000/web/tbwcore/images/icon/bot_empty.png"
        },
        feedback: {
          color: '#868E96'
        },
        userMessage: {
          backgroundColor: "#F8CACA",
          textColor: '#474747'
        },
        textInput: {
          placeholder: "질문을 입력하세요.",
          backgroundColor: "#FFFFFF",
          textColor: "#D9D9D9",
          sendButtonColor: "#2C3238",
          autoFocus: true,
          isSpeechToTextEnabled: true,
        },
        footer: {
          text: "",
          company: ""
        },
        gptModels: {
          label: "모델",
          defaultValue: "openai:::gpt-4o-mini",
          values: [{"label":"OpenAI - GPT-4o mini","value":"openai:::gpt-4o-mini"},
            {"label":"OpenAI - GPT-5 nano","value":"openai::low:gpt-5-nano"},
            {"label":"OpenAI - GPT-5 mini","value":"openai::low:gpt-5-mini"},
            {"label":"Bedrock - Nova Pro","value":"bedrock:::apac.amazon.nova-pro-v1:0"},
            {"label":"HuggingFace - Qwen 3 \/ 8B","value":"ollama:::qwen3:8b"},
            {"label":"HuggingFace - Llama 3.2 \/ 3B","value":"ollama:::llama3.2:3b"}]
        },
        mdmModules: {
          label: "모듈",
          defaultValue: "MDM",
          values: [
            { value: 'MDM', label: 'MDM' },
            { value: 'DOM', label: 'DOM' },
            { value: 'DQM', label: 'DQM' },
            { value: 'META', label: 'META' },
            { value: 'DI', label: 'DI' },
            { value: 'SNOP', label: 'S&OP' },
          ]
        },
      }
    },
    observersConfig: {
      // The bot message stack has changed
      observeMessages: (messages) => {
        console.log({ messages });
      },
      // Source link has clicked
      observeSourceClick: (source) => {
        //console.log(source);
        if (source && source.metadata) {
          //alert('PDF Viewer를 띄우겠습니다.' + source.metadata.solution + ' ' + source.metadata.solution + ' page');
        }
        console.log(source);
      },
      // The bot message stack has changed
      observeMenuClick: (menu) => {
        console.log('observeMenuClick', { menu });
      },
      observeCloseClick: () => {
        if (parent.parent && parent.parent.closeToBeAI) {
          parent.parent.closeToBeAI();
        }
      },
    }
  })
</script>
<div id="chatbot-container">
  <flowise-fullchatbot></flowise-fullchatbot>
</div>
</body>

</html>